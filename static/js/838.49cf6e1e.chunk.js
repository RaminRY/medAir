"use strict";(self.webpackChunkMedAir3=self.webpackChunkMedAir3||[]).push([[838],{6838:function(e,n,t){t.r(n),t.d(n,{default:function(){return J}});var a=t(9439),r=t(2791),l=t(4087),s=t(1413),i=t(2491),o=t(131),d=t(1326),u=t(1244),c=t(6877),p=t(184);function y(e){var n=e.handleDelete;return(0,p.jsx)(c.Z,{onClick:n})}var h=(0,r.memo)(y),f=t(3433),x=t(2014),m=t(3416),Z=t(378);function b(e){var n=e.columns,t=(0,r.useState)(!1),l=(0,a.Z)(t,2),s=l[0],i=l[1],o=(0,u.m)((function(e){return e.analysisTableSetting})),d=(0,u.m)((function(e){return e.setAnalysisTableSetting})),c=function(e){var n=e.target.id,t=e.target.checked,a=(0,m.p)(o);a.forEach((function(e){e.dataIndex===n&&(e.isVisible=t)})),d((0,f.Z)(a))};(0,r.useEffect)((function(){var e=n.map((function(e){return{key:e.key,dataIndex:e.dataIndex,isVisible:e.isVisible,title:e.title}}));d(e)}),[]);var y=(0,r.useMemo)((function(){return o?null===o||void 0===o?void 0:o.map((function(e){return{label:(0,p.jsx)(x.Z,{id:null===e||void 0===e?void 0:e.dataIndex,onChange:c,defaultChecked:null===e||void 0===e?void 0:e.isVisible,children:e.title})}})):[]}),[o]);return(0,p.jsx)(Z.Z,{items:y,isOpen:s,onOpenChange:function(e){i(e)}})}var j=(0,r.memo)(b),v=t(7892),g=t.n(v);function T(e){var n=e.selectedRowKey,t=e.setSelectedRowKey,c=e.form,y=(0,i.a)("(min-width: 400px)"),f=(0,a.Z)(y,1)[0],x=(0,u.m)((function(e){return e.diseaseHistoryTableSetting})),m=(0,u.o)((function(e){return e.dataSourceAnalysisTable})),Z=(0,u.o)((function(e){return e.setDataSourceAnalysisTable})),b=(0,u.o)((function(e){return e.setIsFieldsChange})),v=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return null!==x&&void 0!==x&&x.find((function(n){return n.dataIndex===e}))?x.find((function(n){return n.dataIndex===e})).isVisible:n},T=(0,r.useMemo)((function(){return[{title:"Breast Type",dataIndex:"analyzesType",key:"analyzesType",isVisible:v("analyzesType"),ellipsis:!0,width:!f&&150,render:function(e){return(0,p.jsx)(o.Z,{placement:"topLeft",title:e,children:e})}},{title:"Sub Type",dataIndex:"analyzesSubType",key:"analyzesSubType",isVisible:v("analyzesSubType"),ellipsis:!0,width:!f&&150,render:function(e){return(0,p.jsx)(o.Z,{placement:"topLeft",title:e,children:e})}},{title:"Description",dataIndex:"analyzesDesc",key:"analyzesDesc",isVisible:v("analyzesDesc"),ellipsis:!0,width:!f&&150,render:function(e){return(0,p.jsx)(o.Z,{placement:"topLeft",title:e,children:e})}},{title:"Date",dataIndex:"date",key:"date",isVisible:v("date"),ellipsis:!0,width:!f&&150,render:function(e){return(0,p.jsx)(o.Z,{placement:"topLeft",title:e,children:e})}},{title:"Image",dataIndex:"analyzesContentName",key:"analyzesContentName",isVisible:v("analyzesContentName"),ellipsis:!0,width:!f&&150,render:function(e){return(0,p.jsx)(o.Z,{placement:"topLeft",title:e,children:e})}},{title:"Delete",width:50,align:"center",dataIndex:"delete",key:"delete",isVisible:v("delete"),ellipsis:!0,render:function(e,n,t){return(0,p.jsx)(h,{handleDelete:function(){b(!0);var e=m.filter((function(e){return e.id!==n.id}));Z(e)}})}}]}),[f,x,m]);return(0,p.jsxs)(l.xu,{display:"flex",flexDirection:"column",children:[(0,p.jsx)(l.xu,{alignSelf:"flex-end",children:(0,p.jsx)(j,{columns:T})}),(0,p.jsx)(d.Z,{size:"small",bordered:!0,scroll:{x:window.innerHeight},pagination:!1,columns:T.filter((function(e){return!0===e.isVisible})),dataSource:m,rowClassName:function(e,t){return n===t+1?"ant-table-row-selected":""},onRow:function(e,n){return{onClick:function(a){!function(e,n){var t=e.analyzesType,a=e.analyzesSubType,r=e.date;c.setFieldsValue((0,s.Z)((0,s.Z)({},e),{},{date:g()(r),analyzesSubType:"Other healthcare area"===t?"":a}))}(e),t(n+1)}}}})]})}var w=(0,r.memo)(T),k=t(4165),z=t(5861),C=t(7027),S=t(1041),I=t(9389),F=t(5953),V=t(9555),D=t(3099),R=t(7309),M=t(3722),O=t(43),A=t(2242),K=t(5518),B=t(1532),U=t(2351),E=t(5835),N=t(176),Y=function(e){var n=e.form,t=e.selectedRowKey,s=(0,r.useState)(),i=(0,a.Z)(s,2),o=i[0],d=i[1],u=(0,r.useState)(),c=(0,a.Z)(u,2),y=c[0],h=c[1],f=(0,r.useState)(!1),x=(0,a.Z)(f,2),m=x[0],Z=x[1],b=function(e){if(e){var n=e.lastIndexOf(".");"pdf"===e.substring(n+1)?(d(null),h(e)):(h(null),d(e))}};(0,r.useEffect)((function(){if(t){var e=n.getFieldsValue().analyzesContentUrl;b(e)}else d(null),h(null)}),[t]);var j=function(){var e=(0,z.Z)((0,k.Z)().mark((function e(t){var a,r,l;return(0,k.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),(a=new FormData).append("file",t),e.next=5,(0,E.Z)("analysesImage",a,"post");case 5:return null!==(r=e.sent)&&void 0!==r&&r.data&&(l=r.data,b(l),n.setFieldsValue({analyzesContentName:t.name}),n.setFieldsValue({analyzesContentUrl:r.data})),Z(!1),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),v=function(){try{d(null),h(null),n.setFieldsValue({analyzesContentName:"",analyzesContentUrl:""})}catch(e){console.log("%c error","background: red; color: dark",e)}};return m?(0,p.jsx)(O.Z,{}):(0,p.jsx)(p.Fragment,{children:o?(0,p.jsxs)(N.k,{gap:"1",m:"3",children:[(0,p.jsx)(A.Z,{width:200,src:o}),(0,p.jsx)(l.xu,{onClick:v,_hover:{color:"red"},ml:"-1",cursor:"pointer",children:(0,p.jsx)(B.Z,{})})]}):y?(0,p.jsxs)(N.k,{gap:"1",m:"3",children:[(0,p.jsx)("embed",{src:y,type:"application/pdf",width:"100%",height:"600px"}),(0,p.jsx)(l.xu,{onClick:v,_hover:{color:"red"},ml:"-1",cursor:"pointer",children:(0,p.jsx)(B.Z,{})})]}):(0,p.jsx)(K.Z,{accept:".png,.pdf,.jpeg,.jpg",listType:"picture",beforeUpload:j,children:o?"":(0,p.jsx)(R.ZP,{icon:(0,p.jsx)(U.Z,{}),children:"Upload"})})})},P=(0,r.memo)(Y),H=["USM","Mammography","Tomosynthesis","MRT","KT","Biopsy","\u0421lips"],L=["Blood analysis","USM","X-ray","Bone osten","Bone naf","KT","Pet","Echocardiography","Electrocardiography","PET-CT","PET-MRI"],W=function(){var e=(0,z.Z)((0,k.Z)().mark((function e(){var n;return(0,k.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.Z)("analysid");case 2:if(null===(n=e.sent)||void 0===n||!n.data){e.next=8;break}return C.ZP.success(),e.abrupt("return",n.data);case 8:return e.abrupt("return",0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function _(e){var n=e.selectedRowKey,t=e.setSelectedRowKey,l=e.form,i=(0,r.useState)(!1),o=(0,a.Z)(i,2),d=o[0],c=o[1],y=(0,u.o)((function(e){return e.dataSourceAnalysisTable})),h=(0,u.o)((function(e){return e.setDataSourceAnalysisTable})),x=function(){var e=(0,z.Z)((0,k.Z)().mark((function e(a){var r,i;return(0,k.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n){e.next=6;break}r=y.map((function(e){if(e.id===a.id){var n=a.date;return(0,s.Z)((0,s.Z)({},a),{},{date:g()(n).format("YYYY-MM-DD HH:mm:ss")})}return e})),h(r),e.next=16;break;case 6:return c(!0),e.next=9,W();case 9:i=e.sent,a.analyzesId=i,a.id=i,a.key=i,a.date=g()().format("YYYY-MM-DD HH:mm:ss"),h([].concat((0,f.Z)(y),[a])),c(!1);case 16:l.resetFields(),t(),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log("%c error","background: red; color: dark",e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(n){return e.apply(this,arguments)}}();return(0,p.jsxs)(M.M,{columns:["1","2"],gap:"1",children:[(0,p.jsxs)(S.Z,{onFinish:x,id:"analysisTableFormBlok",form:l,labelWrap:!0,labelAlign:"right",labelCol:{span:8},wrapperCol:{span:16},style:{maxWidth:600},children:[(0,p.jsx)(S.Z.Item,{hidden:!0,name:"id",children:(0,p.jsx)(I.Z,{})}),(0,p.jsx)(S.Z.Item,{hidden:!0,name:"date",children:(0,p.jsx)(F.Z,{})}),(0,p.jsx)(S.Z.Item,{label:"Analyzes type",name:"analyzesType",children:(0,p.jsxs)(V.Z,{allowClear:!0,children:[(0,p.jsx)(V.Z.Option,{value:"Breast",children:"Breast"}),(0,p.jsx)(V.Z.Option,{value:"Other analysis",children:"Other analysis"}),(0,p.jsx)(V.Z.Option,{value:"Other healthcare area",children:"Other healthcare area"})]})}),(0,p.jsx)(S.Z.Item,{noStyle:!0,shouldUpdate:function(e,n){return e.analyzesType!==n.analyzesType},children:function(e){var n=e.getFieldValue,t=[];if("Breast"===n("analyzesType"))t=H;else if("Other analysis"===n("analyzesType"))t=L;else if("Other healthcare area"===n("analyzesType"))return"";return(0,p.jsx)(S.Z.Item,{label:"Analysis sub type",name:"analyzesSubType",children:(0,p.jsx)(V.Z,{allowClear:!0,children:t.map((function(e){return(0,p.jsx)(V.Z.Option,{value:e,children:e},e)}))})})}}),(0,p.jsx)(S.Z.Item,{label:"Description",name:"analyzesDesc",children:(0,p.jsx)(I.Z.TextArea,{showCount:!0,maxLength:3e3,rows:3})}),(0,p.jsx)(S.Z.Item,{hidden:!0,name:"analyzesContentUrl",children:(0,p.jsx)(I.Z,{})}),(0,p.jsx)(S.Z.Item,{hidden:!0,name:"analyzesContentName",children:(0,p.jsx)(I.Z,{})})]}),(0,p.jsxs)(S.Z,{onFinish:x,id:"analysisTableFormBlok",form:l,labelWrap:!0,labelAlign:"right",labelCol:{span:8},wrapperCol:{span:16},style:{maxWidth:600},children:[(0,p.jsx)(S.Z.Item,{hidden:!0,name:"analyzesContentName",children:(0,p.jsx)(I.Z,{})}),(0,p.jsx)(S.Z.Item,{hidden:!0,name:"analyzesContentUrl",children:(0,p.jsx)(I.Z,{})}),(0,p.jsx)(S.Z.Item,{children:(0,p.jsxs)(D.Z,{children:[(0,p.jsx)(R.ZP,{form:"analysisTableFormBlok",htmlType:"submit",type:"primary",loading:d,children:n?"Edit":"Add"}),(0,p.jsx)(R.ZP,{onClick:function(){l.resetFields(),t()},danger:!0,children:n?"Close":"Clear"})]})}),(0,p.jsx)(S.Z.Item,{noStyle:!0,shouldUpdate:function(e,n){return e.analyzesSubType!==n.analyzesSubType},children:function(e){return(0,e.getFieldValue)("analyzesSubType")?(0,p.jsx)(P,{form:l,selectedRowKey:n}):""}})]})]})}var X=(0,r.memo)(_),q=t(667);function G(){var e=(0,r.useState)(),n=(0,a.Z)(e,2),t=n[0],s=n[1],i=S.Z.useForm(),o=(0,a.Z)(i,1)[0];return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(q.Z,{}),(0,p.jsxs)(l.xu,{p:"2",my:"2",boxShadow:"xl",bg:"pink.50",borderRadius:"15px",children:[(0,p.jsx)(l.xu,{p:"2",my:"2",border:"1px solid pink",borderRadius:"15px",bg:t?"blue.50":"",children:(0,p.jsx)(X,{selectedRowKey:t,setSelectedRowKey:s,form:o})}),(0,p.jsx)(l.xu,{p:"2",my:"2",border:"1px solid pink",borderRadius:"15px",children:(0,p.jsx)(w,{selectedRowKey:t,setSelectedRowKey:s,form:o})})]})]})}var J=(0,r.memo)(G)}}]);
//# sourceMappingURL=838.49cf6e1e.chunk.js.map