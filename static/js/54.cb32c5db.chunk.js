"use strict";(self.webpackChunkMedAir3=self.webpackChunkMedAir3||[]).push([[54],{6877:function(e,t,n){var r=n(3655),a=n(5820),i=n(2791),u=n(2622),c=n(4087),o=n(184);function s(e){var t=e.onClick;return(0,o.jsx)(r.Z.Link,{children:(0,o.jsx)(c.xu,{color:"red",onClick:function(e){return e.stopPropagation()},children:(0,o.jsx)(a.Z,{title:"Are you sure you want to delete this item?",okText:"Yes",cancelText:"No",onConfirm:t,children:(0,o.jsx)(u.Z,{})})})})}t.Z=(0,i.memo)(s)},7537:function(e,t,n){n.d(t,{Z:function(){return E}});var r=n(3433),a=n(1413),i=n(9439),u=n(5987),c=n(1041),o=n(1326),s=n(2791),l=n(4165),d=n(5861),p=n(4942),f=n(9555),v=n(1933),x=n(5835),h=n(184),Z=f.Z.Option,m=function(){var e=(0,d.Z)((0,l.Z)().mark((function e(){var t;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.Z)("managers/tabs");case 2:if(null===(t=e.sent)||void 0===t||!t.data){e.next=5;break}return e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(e){var t=e.dataIndex,n=(e.title,e.inputRef),r=e.save,a=(0,v.useQuery)(["managers/tabs"],m,{enabled:!1}),i=a.data,u=a.isLoading,o=a.refetch;return(0,h.jsx)(c.Z.Item,{style:{margin:0},name:t,children:(0,h.jsx)(f.Z,{allowClear:!0,ref:n,lazyLoad:!0,onBlur:function(){r("select")},loading:u,onFocus:o,children:null===i||void 0===i?void 0:i.map((function(e,t){return(0,h.jsx)(Z,{value:JSON.stringify(e),children:e.cureTabName},e.cureTabId)}))})})},y=(0,s.memo)(b),k=f.Z.Option,g=function(e){var t=e.dataIndex,n=(e.title,e.inputRef),r=e.save;return(0,h.jsx)(c.Z.Item,{style:{margin:0},name:t,children:(0,h.jsxs)(f.Z,{allowClear:!0,ref:n,lazyLoad:!0,onBlur:function(){r("select")},children:[(0,h.jsx)(k,{value:"Tablet",children:"Tablet"}),(0,h.jsx)(k,{value:"Ampoule",children:"Ampoule"}),(0,h.jsx)(k,{value:"Drops",children:"Drops"})]})})},w=(0,s.memo)(g),T=n(9389),j=function(e){var t=e.dataIndex,n=(e.title,e.inputRef),r=e.save;return(0,h.jsx)(c.Z.Item,{name:t,children:(0,h.jsx)(T.Z,{ref:n,onPressEnter:r,onBlur:r})})},I=(0,s.memo)(j),S=function(e){var t=e.dataIndex,n=e.title,r=e.inputRef,a=e.save,i=e.inputType;return"useTabs"===t||"cureTabName"===t&&"select"===i?(0,h.jsx)(y,{dataIndex:t,title:n,inputRef:r,save:a}):"cureTabType"===t&&"select"===i?(0,h.jsx)(w,{dataIndex:t,title:n,inputRef:r,save:a}):(0,h.jsx)(I,{dataIndex:t,title:n,inputRef:r,save:a})},C=(0,s.memo)(S),N=function(e){var t=e.title,n=e.editable,r=e.children,u=e.dataIndex,c=e.record,o=e.handleSave,f=e.setShowSaveButton,v=e.form,x=e.inputType,Z=(0,s.useState)(!1),m=(0,i.Z)(Z,2),b=m[0],y=m[1],k=(0,s.useRef)(null);(0,s.useEffect)((function(){b&&k.current.focus()}),[b]);var g=function(){f&&f(!0),y(!b),v.setFieldsValue((0,p.Z)({},u,c[u]))},w=function(){var e=(0,d.Z)((0,l.Z)().mark((function e(t){var n,r,i;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.validateFields();case 3:n=e.sent,Object.keys(n).includes("useTabs")&&"select"===t&&(r=JSON.parse(n.useTabs),n.useTabs=r.cureTabName,n.cureTabType=r.cureTabType),Object.keys(n).includes("cureTabName")&&"select"===t&&(i=JSON.parse(n.cureTabName),n.cureTabName=i.cureTabName,n.cureTabType=i.cureTabType),g(),o((0,a.Z)((0,a.Z)({},c),n)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),T=r;return n&&(T=b?(0,h.jsx)(C,{dataIndex:u,title:t,inputRef:k,save:w,inputType:x}):(0,h.jsx)("div",{className:"editable-cell-value-wrap",style:{paddingRight:24,height:"35px"},onClick:g,children:r})),{childNode:T}},P=["index"],R=["title","editable","children","dataIndex","record","handleSave","setShowSaveButton","inputType"],D=s.createContext(null),O=function(e){e.index;var t=(0,u.Z)(e,P),n=c.Z.useForm(),r=(0,i.Z)(n,1)[0];return(0,h.jsx)(c.Z,{form:r,component:!1,children:(0,h.jsx)(D.Provider,{value:r,children:(0,h.jsx)("tr",(0,a.Z)({},t))})})},q=function(e){var t=e.title,n=e.editable,r=e.children,i=e.dataIndex,c=e.record,o=e.handleSave,l=e.setShowSaveButton,d=e.inputType,p=(0,u.Z)(e,R),f=(0,s.useContext)(D),v=N({title:t,editable:n,children:r,dataIndex:i,record:c,handleSave:o,setShowSaveButton:l,inputType:d,form:f}).childNode;return(0,h.jsx)("td",(0,a.Z)((0,a.Z)({},p),{},{children:v}))},B=function(e){var t=e.dataSource,n=e.setDataSource,i=e.defaultColumns,u=e.onChange,c=function(e){var i=(0,r.Z)(t),c=i.findIndex((function(t){return e.key===t.key})),o=i[c];i.splice(c,1,(0,a.Z)((0,a.Z)({},o),e)),n(i),null===u||void 0===u||u()},s={body:{row:O,cell:q}},l=null===i||void 0===i?void 0:i.map((function(e){return e.editable?(0,a.Z)((0,a.Z)({},e),{},{onCell:function(t){return{record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,inputType:e.inputType,handleSave:c}}}):e}));return(0,h.jsx)("div",{children:(0,h.jsx)(o.Z,{size:"small",bordered:!0,scroll:{x:window.innerHeight},rowClassName:function(){return"editable-row"},components:s,dataSource:t,columns:l,pagination:!1})})},E=(0,s.memo)(B)},5835:function(e,t,n){var r=n(4165),a=n(5861),i=n(7027),u=n(1243),c="http://5.189.181.111:8080/api/",o=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("login"===t){e.next=17;break}return e.prev=1,n=localStorage.getItem("token"),e.next=5,u.Z.get(c+"token/"+n);case 5:if("ok"!==(null===(a=e.sent)||void 0===a?void 0:a.data)){e.next=10;break}return e.abrupt("return","ok");case 10:"no"===(null===a||void 0===a?void 0:a.data)&&(localStorage.clear(),window.location.reload());case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),i.ZP.error("ERROR: Verification Token "),console.log("err in verificationToken");case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();function s(){return s=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,s,l=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:{},a=l.length>2&&void 0!==l[2]?l[2]:"get",e.prev=2,c){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,o(t);case 7:if(!e.sent&&"login"!==t){e.next=13;break}return e.next=11,u.Z[a](c+t,n);case 11:return s=e.sent,e.abrupt("return",s);case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),i.ZP.error(e.t0.message),console.log("%c error","background: red; color: dark",e.t0);case 19:case"end":return e.stop()}}),e,null,[[2,15]])}))),s.apply(this,arguments)}t.Z=function(e){return s.apply(this,arguments)}},1054:function(e,t,n){n.r(t);var r=n(3433),a=n(1413),i=n(9439),u=n(4165),c=n(5861),o=n(2791),s=n(4087),l=n(9286),d=n(7537),p=n(131),f=n(7027),v=n(7309),x=n(5835),h=n(6877),Z=n(1933),m=n(184),b=function(){var e=(0,c.Z)((0,u.Z)().mark((function e(){var t;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.Z)("managers/places");case 2:if(null===(t=e.sent)||void 0===t||!t.data){e.next=6;break}return t.data.forEach((function(e){return e.Id=e.visitPlaceId})),e.abrupt("return",t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.default=function(){var e=(0,o.useState)(!0),t=(0,i.Z)(e,2),n=t[0],y=t[1],k=(0,o.useState)(!1),g=(0,i.Z)(k,2),w=g[0],T=g[1],j=(0,Z.useQuery)("managers/places",b),I=j.data,S=j.isFetching,C=j.refetch,N=(0,o.useState)(I||[]),P=(0,i.Z)(N,2),R=P[0],D=P[1];(0,o.useEffect)((function(){!S&&I&&D(I)}),[S]);var O=(0,o.useMemo)((function(){return[{title:"Name",dataIndex:"placeName",key:"placeName",ellipsis:!0,editable:!0,render:function(e){return(0,m.jsx)(p.Z,{placement:"topLeft",title:e,children:e})}},{title:"City",dataIndex:"placeCity",key:"placeCity",inputType:"select",ellipsis:!0,editable:!0,render:function(e){return(0,m.jsx)(p.Z,{placement:"topLeft",title:e,children:e})}},{title:"Country",dataIndex:"placeCountry",key:"placeCountry",inputType:"select",ellipsis:!0,editable:!0,render:function(e){return(0,m.jsx)(p.Z,{placement:"topLeft",title:e,children:e})}},{title:"Delete",dataIndex:"delete",width:50,key:"delete",ellipsis:!0,align:"center",render:function(e,t,n){return(0,m.jsx)(h.Z,{onClick:function(){B(t)}})}}]}),[R]),q=function(e){var t=R.filter((function(t){return t.Id!==e.Id}));D(t),f.ZP.success("Deleted")},B=function(){var e=(0,c.Z)((0,u.Z)().mark((function e(t){var n,r,a;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.visitPlaceId){e.next=3;break}return e.abrupt("return",q(t));case 3:return e.next=5,(0,x.Z)("managers/places/"+n,{},"delete");case 5:"success"===(null===(r=e.sent)||void 0===r?void 0:r.data)?(f.ZP.success("Deleted!"),a=R.filter((function(e){return e.Id!==t.Id})),D(a),C()):f.ZP.warning("Something get wrong");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=(0,c.Z)((0,u.Z)().mark((function e(){var t,n;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T(!0),t=0;case 2:if(!(t<R.length)){e.next=11;break}return n=(0,a.Z)({},R[t]),e.next=6,(0,x.Z)("managers/places",n,"post");case 6:e.sent?(f.ZP.success({content:"Saved",key:"save_manager"}),C()):f.ZP.error("Error");case 8:t++,e.next=2;break;case 11:T(!1),y(!0);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,m.jsx)(s.xu,{boxShadow:"xl",p:"2",bg:"pink.100",borderRadius:"15px",children:(0,m.jsxs)(s.xu,{display:"flex",flexDirection:"column",children:[(0,m.jsx)(v.ZP,{disabled:n,loading:w,block:!0,onClick:E,type:"primary",children:"Save"}),(0,m.jsx)(d.Z,{dataSource:R,setDataSource:D,defaultColumns:O,onChange:function(){y(!1)}}),(0,m.jsx)(v.ZP,{block:!0,icon:(0,m.jsx)(l.Z,{}),onClick:function(){var e=(new Date).getTime(),t={key:e,Id:e};D((function(e){return[].concat((0,r.Z)(e),[t])})),y(!1)},children:"New medications"})]})})}},9286:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(1413),a=n(2791),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},u=n(4291),c=function(e,t){return a.createElement(u.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:i}))};c.displayName="PlusOutlined";var o=a.forwardRef(c)}}]);
//# sourceMappingURL=54.cb32c5db.chunk.js.map