"use strict";(self.webpackChunkMedAir3=self.webpackChunkMedAir3||[]).push([[12],{6651:function(e,t,n){var r=n(2964),a=n(7309),s=n(2791),o=n(2486),i=n(1244),u=n(4087),c=n(184);function p(){var e=(0,i.o)((function(e){return e.isFieldsChange})),t=(0,i.o)((function(e){return e.setIsFieldsChange})),n=(0,o.Z)(),s=n.handleSave,p=n.isLoading;return e?(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(r.Z,{message:(0,c.jsx)(u.xu,{color:"red",children:"You have an unsaved patient!"}),onClose:function(){t(!1)},action:(0,c.jsx)(a.ZP,{onClick:s,loading:p,size:"small",type:"primary",children:"Save"}),type:"warning",showIcon:!0,closable:!0})}):""}t.Z=(0,s.memo)(p)},9572:function(e,t,n){n.d(t,{$M:function(){return u},H9:function(){return l},M9:function(){return h},Yo:function(){return p},bp:function(){return c},dK:function(){return m},jW:function(){return d},pP:function(){return k},si:function(){return f}});var r=n(4165),a=n(5861),s=n(7027),o=n(5835),i=function(e,t){e&&"string"!==typeof e?s.ZP.success({content:t+" saved",key:t+"_save",duration:2}):s.ZP.error({content:t+" don't saved",key:t+"_save",duration:2})},u=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,o.Z)("patientid",{},"get");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),s.ZP.error({content:e.t0,key:"doc_save",duration:2});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.Z)("vite",t,"post");case 2:return n=e.sent,i(n,"Person Info"),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.Z)("morby",t,"post");case 2:n=e.sent,i(n,"Disease History");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.Z)("visits",t,"post");case 2:n=e.sent,i(n,"Visit");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.Z)("analyses",t,"post");case 2:n=e.sent,i(n,"Analyses");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.Z)("treatment",t,"post");case 2:n=e.sent,i(n,"Treatment");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.Z)("visitsformcalendar",t,"post"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.Z)("patients/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,o,i,p,d,l,f,m,h,k,g;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.sendObj).patientId){e.next=7;break}o=n.patientId,Z(o).then((function(e){null!==e&&void 0!==e&&e.data?a=n.patientId:s.ZP.warning({content:"The Patient not find",key:"info_message",duration:4})})),a=n.patientId,e.next=10;break;case 7:return e.next=9,u();case 9:a=e.sent;case 10:if(i=n.patientName,p=n.patientSurName,d=n.patientPatronymic,l=n.visitDate,f=n.phoneNumber,m=n.status,h=n.visitReason,k={patientVisitsList:[{patientId:a,status:m,visitDate:l,visitReason:h}]},g={patientId:a,patientName:i,patientSurName:p,patientPatronymic:d,phoneNumber:f},!a){e.next=20;break}if(n.patientId){e.next=17;break}return e.next=17,c(g);case 17:return e.next=19,v(k);case 19:e.sent;case 20:return e.abrupt("return",!0);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.Z)("managers/pathologists");case 2:if(null===(t=e.sent)||void 0===t||!t.data){e.next=5;break}return e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.Z)("managers/places");case 2:if(null===(t=e.sent)||void 0===t||!t.data){e.next=5;break}return e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},5835:function(e,t,n){var r=n(4165),a=n(5861),s=n(7027),o=n(1243),i="http://5.189.181.111:8080/api/",u=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("login"===t){e.next=17;break}return e.prev=1,n=localStorage.getItem("token"),e.next=5,o.Z.get(i+"token/"+n);case 5:if("ok"!==(null===(a=e.sent)||void 0===a?void 0:a.data)){e.next=10;break}return e.abrupt("return","ok");case 10:"no"===(null===a||void 0===a?void 0:a.data)&&(localStorage.clear(),window.location.reload());case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),s.ZP.error("ERROR: Verification Token "),console.log("err in verificationToken");case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();function c(){return c=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,c,p=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.length>1&&void 0!==p[1]?p[1]:{},a=p.length>2&&void 0!==p[2]?p[2]:"get",e.prev=2,i){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,u(t);case 7:if(!e.sent&&"login"!==t){e.next=13;break}return e.next=11,o.Z[a](i+t,n);case 11:return c=e.sent,e.abrupt("return",c);case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),s.ZP.error(e.t0.message),console.log("%c error","background: red; color: dark",e.t0);case 19:case"end":return e.stop()}}),e,null,[[2,15]])}))),c.apply(this,arguments)}t.Z=function(e){return c.apply(this,arguments)}},9162:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(4165),a=n(5861),s=n(9439),o=n(7689),i=n(5835),u=n(3052),c=n(1244),p=n(2791),d=n(7892),l=n.n(d),f=function(){var e=(0,p.useState)(!1),t=(0,s.Z)(e,2),n=t[0],d=t[1],f=(0,u.b)(),v=f.personInfoForm,Z=f.diseaseHistoryForm,m=f.patientForm,h=f.setFamilyMembersList,k=f.treatmentHistoryForm,g=(0,o.s0)(),b=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.Z)("vite/"+t,{},"get");case 3:null!==(n=e.sent)&&void 0!==n&&n.data&&(console.log("res?.fetchPersonInfo",null===n||void 0===n?void 0:n.data),n.data.birthDate=n.data.birthDate?l()(n.data.birthDate):null,v.setFieldsValue(n.data),m.setFieldsValue(n.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("%c error","background: red; color: dark",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),y=(0,c.o)((function(e){return e.setDataSourceDiseaseHistoryTable})),x=(0,c.o)((function(e){return e.setSavedDrawingCanvas})),w=(0,c.o)((function(e){return e.setDescriptionsCanvas})),I=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,s,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.Z)("morby/"+t,{},"get");case 3:null!==(n=e.sent)&&void 0!==n&&n.data&&(console.log("res?.fetchDiseaseHistory",null===n||void 0===n?void 0:n.data),Z.setFieldsValue(n.data),null===n||void 0===n||n.data.deseaseHistoryDynamicsList.forEach((function(e){return e.id=e.patientsComplaintsId})),y(n.data.deseaseHistoryDynamicsList),h(n.data.familyMembersList),x((null===(a=n.data)||void 0===a?void 0:a.deseaseImagesList)||{}),null!==(s=n.data.deseaseImagesList)&&void 0!==s&&s.deseaseImageDesc&&(o=JSON.parse(n.data.deseaseImagesList.deseaseImageDesc),w(o))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("%c error","background: red; color: dark",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),D=(0,c.o)((function(e){return e.setDataSourceVisitTable})),F=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.Z)("visits/patientId/"+t,{},"get");case 3:null!==(n=e.sent)&&void 0!==n&&n.data&&(console.log("res?.fetchVisits",null===n||void 0===n?void 0:n.data),n.data.forEach((function(e){return e.id=e.visitId})),D(n.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("%c error","background: red; color: dark",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),S=(0,c.o)((function(e){return e.setDataSourceAnalysisTable})),L=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.Z)("analyses/"+t,{},"get");case 3:null!==(n=e.sent)&&void 0!==n&&n.data&&(console.log("res?.fetchAnalyses",null===n||void 0===n?void 0:n.data),n.data.forEach((function(e){return e.id=e.analyzesId})),S(n.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("%c error","background: red; color: dark",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),P=(0,c.o)((function(e){return e.setDataSourceTreatmentTable})),T=(0,c.o)((function(e){return e.setRecipeList})),V=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,s,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.Z)("treatment/"+t,{},"get");case 3:null!==(n=e.sent)&&void 0!==n&&n.data&&(console.log("res?.fetchTreatment",null===n||void 0===n?void 0:n.data),k.setFieldsValue(n.data),a=n.data,s=a.treatmentDynamics,o=a.recipeList,s.forEach((function(e){return e.id=e.treatmentId})),P(s),o.forEach((function(e){return e.id=e.recipeId})),T(o)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("%c error","background: red; color: dark",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return{onRowTable:function(e){try{!function(e){try{d(!0),Promise.all([b(e),I(e),F(e),L(e),V(e)]).then((function(e){d(!1),g("/person_info")}))}catch(t){}}(e.patientId)}catch(t){console.log("%c error","background: red; color: dark",t.message)}},isLoading:n}}},2486:function(e,t,n){var r=n(4165),a=n(5861),s=n(1413),o=n(9439),i=n(7892),u=n.n(i),c=n(9572),p=n(3052),d=n(1244),l=n(2791);t.Z=function(){var e=(0,l.useState)(!1),t=(0,o.Z)(e,2),n=t[0],i=t[1],f=(0,p.b)(),v=f.patientForm,Z=f.personInfoForm,m=f.diseaseHistoryForm,h=f.familyMembersList,k=f.treatmentHistoryForm,g=(0,d.o)((function(e){return e.dataSourceDiseaseHistoryTable})),b=(0,d.o)((function(e){return e.savedDrawingCanvas})),y=(0,d.o)((function(e){return e.descriptionsCanvas})),x=(0,d.o)((function(e){return e.dataSourceVisitTable})),w=(0,d.o)((function(e){return e.dataSourceAnalysisTable})),I=(0,d.o)((function(e){return e.dataSourceTreatmentTable})),D=(0,d.o)((function(e){return e.recipeList})),F=function(e){var t=v.getFieldsValue(),n=t.patientName,r=t.patientSurName,a=t.patientPatronymic,o=Z.getFieldsValue(),i=o.birthDate,p=o.alkogol,d=o.smoke,l=(0,s.Z)((0,s.Z)({},Z.getFieldsValue()),{},{birthDate:u()(i).format("YYYY-MM-DD"),alkogol:p?1:0,smoke:d?1:0,patientName:n,patientSurName:r,patientPatronymic:a,patientId:e});(0,c.bp)(l)},S=function(e){b.deseaseImageDesc=JSON.stringify(y);var t=(0,s.Z)((0,s.Z)({},m.getFieldsValue()),{},{patientId:e,familyMembersList:h,deseaseImagesList:b,deseaseHistoryDynamicsList:g});(0,c.Yo)(t)},L=function(e){var t={patientVisitsList:x,patientId:e};(0,c.jW)(t)},P=function(e){var t={analyzesMediaList:w,patientId:e};(0,c.H9)(t)},T=function(e){var t=(0,s.Z)((0,s.Z)({},k.getFieldsValue()),{},{patientId:e,treatmentDynamics:I,recipeList:D});(0,c.si)(t)},V=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i(!0),setTimeout((function(){i(!1)}),1e3),!(t=v.getFieldsValue().patientId)){e.next=7;break}n=t,e.next=10;break;case 7:return e.next=9,(0,c.$M)();case 9:n=e.sent;case 10:n&&Promise.all([F(n),S(n),L(n),P(n),T(n)]);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{handleSave:V,isLoading:n}}}}]);
//# sourceMappingURL=12.be9b3a69.chunk.js.map